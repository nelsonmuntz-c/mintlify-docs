---
title: 'gRPC API'
description: 'High-performance gRPC interface for programmatic access'
---

# gRPC API

gRPC provides the highest performance access to XYZ Chain with strongly-typed clients.

## Endpoint

```
localhost:9090
```

For TLS-enabled endpoints (testnet/mainnet):
```
grpc.xyz.network:443
```

## Prerequisites

### grpcurl

Install grpcurl for command-line testing:

```bash
# macOS
brew install grpcurl

# Linux
go install github.com/fullstorydev/grpcurl/cmd/grpcurl@latest
```

### Reflection

XYZ Chain supports gRPC reflection, allowing clients to discover services:

```bash
grpcurl -plaintext localhost:9090 list
```

## Service Discovery

### List All Services

```bash
grpcurl -plaintext localhost:9090 list
```

<Accordion title="Output">
```
cosmos.auth.v1beta1.Query
cosmos.bank.v1beta1.Query
cosmos.distribution.v1beta1.Query
cosmos.gov.v1.Query
cosmos.mint.v1beta1.Query
cosmos.staking.v1beta1.Query
cosmos.tx.v1beta1.Service
cosmwasm.wasm.v1.Query
grpc.reflection.v1alpha.ServerReflection
```
</Accordion>

### List Methods in Service

```bash
grpcurl -plaintext localhost:9090 list cosmos.bank.v1beta1.Query
```

Output:
```
cosmos.bank.v1beta1.Query.AllBalances
cosmos.bank.v1beta1.Query.Balance
cosmos.bank.v1beta1.Query.DenomMetadata
cosmos.bank.v1beta1.Query.DenomsMetadata
cosmos.bank.v1beta1.Query.Params
cosmos.bank.v1beta1.Query.SpendableBalances
cosmos.bank.v1beta1.Query.SupplyOf
cosmos.bank.v1beta1.Query.TotalSupply
```

### Describe Method

```bash
grpcurl -plaintext localhost:9090 describe cosmos.bank.v1beta1.Query.AllBalances
```

## Bank Queries

### All Balances

```bash
grpcurl -plaintext \
  -d '{"address": "xyz1address..."}' \
  localhost:9090 \
  cosmos.bank.v1beta1.Query/AllBalances
```

<Accordion title="Response">
```json
{
  "balances": [
    {"denom": "uxyz", "amount": "1000000"}
  ],
  "pagination": {"total": "1"}
}
```
</Accordion>

### Single Balance

```bash
grpcurl -plaintext \
  -d '{"address": "xyz1address...", "denom": "uxyz"}' \
  localhost:9090 \
  cosmos.bank.v1beta1.Query/Balance
```

### Total Supply

```bash
grpcurl -plaintext localhost:9090 cosmos.bank.v1beta1.Query/TotalSupply
```

### Spendable Balances

```bash
grpcurl -plaintext \
  -d '{"address": "xyz1address..."}' \
  localhost:9090 \
  cosmos.bank.v1beta1.Query/SpendableBalances
```

## Auth Queries

### Get Account

```bash
grpcurl -plaintext \
  -d '{"address": "xyz1address..."}' \
  localhost:9090 \
  cosmos.auth.v1beta1.Query/Account
```

<Accordion title="Response">
```json
{
  "account": {
    "@type": "/cosmos.auth.v1beta1.BaseAccount",
    "address": "xyz1address...",
    "pubKey": {
      "@type": "/cosmos.crypto.secp256k1.PubKey",
      "key": "A..."
    },
    "accountNumber": "0",
    "sequence": "5"
  }
}
```
</Accordion>

### List Accounts

```bash
grpcurl -plaintext localhost:9090 cosmos.auth.v1beta1.Query/Accounts
```

## Staking Queries

### Get Validators

```bash
grpcurl -plaintext localhost:9090 cosmos.staking.v1beta1.Query/Validators
```

### Get Delegations

```bash
grpcurl -plaintext \
  -d '{"delegator_addr": "xyz1delegator..."}' \
  localhost:9090 \
  cosmos.staking.v1beta1.Query/DelegatorDelegations
```

### Get Staking Pool

```bash
grpcurl -plaintext localhost:9090 cosmos.staking.v1beta1.Query/Pool
```

## WASM Contract Queries

### List Codes

```bash
grpcurl -plaintext localhost:9090 cosmwasm.wasm.v1.Query/Codes
```

<Accordion title="Response">
```json
{
  "codeInfos": [
    {
      "codeId": "1",
      "creator": "xyz1creator...",
      "dataHash": "ABC123...",
      "instantiatePermission": {"permission": "EVERYBODY"}
    }
  ]
}
```
</Accordion>

### Get Code Info

```bash
grpcurl -plaintext \
  -d '{"code_id": "1"}' \
  localhost:9090 \
  cosmwasm.wasm.v1.Query/Code
```

### List Contracts by Code

```bash
grpcurl -plaintext \
  -d '{"code_id": "1"}' \
  localhost:9090 \
  cosmwasm.wasm.v1.Query/ContractsByCode
```

### Get Contract Info

```bash
grpcurl -plaintext \
  -d '{"address": "xyz1contract..."}' \
  localhost:9090 \
  cosmwasm.wasm.v1.Query/ContractInfo
```

### Query Smart Contract

Query message must be base64-encoded:

```bash
# Encode query
QUERY=$(echo -n '{"get_count":{}}' | base64)

grpcurl -plaintext \
  -d "{\"address\": \"xyz1contract...\", \"query_data\": \"$QUERY\"}" \
  localhost:9090 \
  cosmwasm.wasm.v1.Query/SmartContractState
```

<Accordion title="Response">
```json
{
  "data": "eyJjb3VudCI6NDJ9"
}
```
The data is base64-encoded JSON. Decode: `{"count":42}`
</Accordion>

### Get Contract History

```bash
grpcurl -plaintext \
  -d '{"address": "xyz1contract..."}' \
  localhost:9090 \
  cosmwasm.wasm.v1.Query/ContractHistory
```

## Transaction Service

### Simulate Transaction

```bash
grpcurl -plaintext \
  -d '{"tx_bytes": "base64-encoded-tx"}' \
  localhost:9090 \
  cosmos.tx.v1beta1.Service/Simulate
```

### Broadcast Transaction

```bash
grpcurl -plaintext \
  -d '{"tx_bytes": "base64-encoded-signed-tx", "mode": "BROADCAST_MODE_SYNC"}' \
  localhost:9090 \
  cosmos.tx.v1beta1.Service/BroadcastTx
```

### Get Transaction

```bash
grpcurl -plaintext \
  -d '{"hash": "ABC123..."}' \
  localhost:9090 \
  cosmos.tx.v1beta1.Service/GetTx
```

### Search Transactions

```bash
grpcurl -plaintext \
  -d '{"events": ["message.sender='"'"'xyz1sender...'"'"'"]}' \
  localhost:9090 \
  cosmos.tx.v1beta1.Service/GetTxsEvent
```

## Node Service

### Get Node Info

```bash
grpcurl -plaintext localhost:9090 cosmos.base.tendermint.v1beta1.Service/GetNodeInfo
```

### Get Syncing Status

```bash
grpcurl -plaintext localhost:9090 cosmos.base.tendermint.v1beta1.Service/GetSyncing
```

### Get Latest Block

```bash
grpcurl -plaintext localhost:9090 cosmos.base.tendermint.v1beta1.Service/GetLatestBlock
```

### Get Block by Height

```bash
grpcurl -plaintext \
  -d '{"height": "1000"}' \
  localhost:9090 \
  cosmos.base.tendermint.v1beta1.Service/GetBlockByHeight
```

## Using with Go

### Setup Client

```go
package main

import (
    "context"
    "fmt"
    "google.golang.org/grpc"
    "google.golang.org/grpc/credentials/insecure"

    banktypes "github.com/cosmos/cosmos-sdk/x/bank/types"
)

func main() {
    // Connect to gRPC
    conn, err := grpc.Dial(
        "localhost:9090",
        grpc.WithTransportCredentials(insecure.NewCredentials()),
    )
    if err != nil {
        panic(err)
    }
    defer conn.Close()

    // Create bank query client
    bankClient := banktypes.NewQueryClient(conn)

    // Query balance
    res, err := bankClient.AllBalances(context.Background(), &banktypes.QueryAllBalancesRequest{
        Address: "xyz1address...",
    })
    if err != nil {
        panic(err)
    }

    fmt.Printf("Balances: %v\n", res.Balances)
}
```

### Query WASM Contract

```go
package main

import (
    "context"
    "encoding/base64"
    "encoding/json"
    "fmt"

    wasmtypes "github.com/cosmwasm/wasmd/x/wasm/types"
    "google.golang.org/grpc"
    "google.golang.org/grpc/credentials/insecure"
)

func main() {
    conn, _ := grpc.Dial("localhost:9090", grpc.WithTransportCredentials(insecure.NewCredentials()))
    defer conn.Close()

    wasmClient := wasmtypes.NewQueryClient(conn)

    // Prepare query
    queryMsg := map[string]interface{}{"get_count": map[string]interface{}{}}
    queryBytes, _ := json.Marshal(queryMsg)

    // Query contract
    res, _ := wasmClient.SmartContractState(context.Background(), &wasmtypes.QuerySmartContractStateRequest{
        Address:   "xyz1contract...",
        QueryData: queryBytes,
    })

    // Parse response
    var result map[string]interface{}
    json.Unmarshal(res.Data, &result)
    fmt.Printf("Result: %v\n", result)
}
```

## Using with JavaScript

### Setup with JavaScript

```javascript
import { QueryClient, createProtobufRpcClient } from "@cosmjs/stargate";
import { Tendermint37Client } from "@cosmjs/tendermint-rpc";
import { QueryClientImpl as BankQuery } from "cosmjs-types/cosmos/bank/v1beta1/query";

async function main() {
  // Connect via RPC (which proxies to gRPC internally)
  const tendermint = await Tendermint37Client.connect("http://localhost:26657");
  const queryClient = QueryClient.withExtensions(tendermint);
  const rpc = createProtobufRpcClient(queryClient);

  // Create bank query client
  const bankQuery = new BankQuery(rpc);

  // Query balance
  const balance = await bankQuery.AllBalances({
    address: "xyz1address..."
  });

  console.log("Balances:", balance.balances);
}

main();
```

## Pagination

Most list queries support pagination:

```bash
# First page
grpcurl -plaintext \
  -d '{"pagination": {"limit": "10"}}' \
  localhost:9090 \
  cosmos.bank.v1beta1.Query/TotalSupply

# Next page
grpcurl -plaintext \
  -d '{"pagination": {"key": "base64-next-key", "limit": "10"}}' \
  localhost:9090 \
  cosmos.bank.v1beta1.Query/TotalSupply
```

## TLS Connection

For testnet/mainnet with TLS:

```bash
# grpcurl with TLS
grpcurl \
  -d '{"address": "xyz1address..."}' \
  grpc.xyz.network:443 \
  cosmos.bank.v1beta1.Query/AllBalances
```

Go client with TLS:

```go
import "google.golang.org/grpc/credentials"

creds := credentials.NewClientTLSFromCert(nil, "")
conn, err := grpc.Dial("grpc.xyz.network:443", grpc.WithTransportCredentials(creds))
```

## Error Handling

gRPC errors include status codes:

| Code | Name | Description |
|------|------|-------------|
| 0 | OK | Success |
| 3 | INVALID_ARGUMENT | Bad request parameters |
| 5 | NOT_FOUND | Resource not found |
| 13 | INTERNAL | Internal server error |
| 14 | UNAVAILABLE | Service unavailable |

Example error:
```json
{
  "code": 5,
  "message": "rpc error: code = NotFound desc = account not found"
}
```

## Complete Service Reference

| Service | Purpose |
|---------|---------|
| `cosmos.auth.v1beta1.Query` | Account queries |
| `cosmos.bank.v1beta1.Query` | Balance queries |
| `cosmos.distribution.v1beta1.Query` | Rewards queries |
| `cosmos.gov.v1.Query` | Governance queries |
| `cosmos.mint.v1beta1.Query` | Minting queries |
| `cosmos.slashing.v1beta1.Query` | Slashing queries |
| `cosmos.staking.v1beta1.Query` | Staking queries |
| `cosmos.tx.v1beta1.Service` | Transaction service |
| `cosmos.base.tendermint.v1beta1.Service` | Node queries |
| `cosmwasm.wasm.v1.Query` | WASM contract queries |
